<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>eCreaylist</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.socket.io/socket.io-1.3.7.js"></script><!-- load socket.io -->
    <script src="https://www.youtube.com/iframe_api"></script><!-- load youtube iframe api -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script><!-- load jquery 2.1.4 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.5/angular.min.js"></script> <!-- load angular 1.4.5 -->
    <script src="js/app.js"></script> <!-- load app -->
    <script src="js/controllers/main.js"></script> <!-- load main controller -->
    <script src="js/services/socket.js"></script> <!-- load socket service -->
    <script src="js/services/youtube.js"></script> <!-- load youtube directive -->
  </head>
  <body ng-app="ecreaylist" ng-controller="MainCtrl as main">
    <div class="user-overlay" ng-if="main.showUserOverlay">
      <div class="user-box table">
        <form class="table-cell" ng-submit="main.saveUser()">
          <input class="form-input" type="text" placeholder="Enter username" ng-model="main.username" />
          <button class="button" type="submit">Let's do this!</button>
        </form>
      </div>
    </div>
    <div class="container">
      <div class="header">
        <div class="column float-left">
          <div class="inner">
            <h1>ecreaylist</h1>
          </div>
        </div>
        <div class="column float-right">
          <div class="inner">
            <form ng-submit="main.search()">
              <input type="text" placeholder="Search YouTube" ng-model="main.query" />
              <button type="submit"><i class="fa fa-search"></i></button>
            </form>
          </div>
        </div>
      </div>
      <div class="column float-left">
        <div class="search-results" ng-if="main.showSearchResults">
          <div class="results-meta">
            Your search returned {{ main.results.length }} results. <a ng-click="main.clearSearch()">(close)</a>
          </div>
          <div class="result table" ng-repeat="result in main.results" ng-click="main.add($index, result)">
            <div class="thumbnail table-cell cell-top">
              <img src="{{ result.snippet.thumbnails.default.url }}" alt="{{ result.snippet.title }}" />
            </div>
            <div class="details table-cell cell-top">
              <h3>{{ result.snippet.title }}</h3>
              <p>{{ result.snippet.description }}</p>
            </div>
          </div>
        </div>
        <div class="messages-outer table" ng-if="!main.showSearchResults">
          <div class="messages-inner table-cell cell-top">
            <div class="message-list">
              <div class="message" ng-repeat="message in main.messages" ng-class="{ 'userMessage': main.username === message.username }">
                <div class="username float-left text-right truncate">{{ message.username }}</div>
                <div class="content float-right">{{ message.message }}</div>
              </div>
            </div>
            <form ng-submit="main.send()">
              <textarea class="form-input" placeholder="Enter message" ng-model="main.message"></textarea>
              <button class="button">Send</button>
            </form>
          </div>
          <div class="user-list table-cell cell-top">
            <span ng-repeat="user in main.users">
              {{ user }}
            </span>
          </div>
        </div>
      </div>
      <div class="column float-right">
        <div id="player"></div>
        <div class="playlist-outer">
          <div class="playlist-buttons table">
            <div class="table-cell" ng-class="{ 'active': main.toggleQueue }" ng-click="main.showQueue()">
              Queue
            </div>
            <div class="table-cell" ng-class="{ 'active': !main.toggleQueue }" ng-click="main.showHistory()">
              Played Videos
            </div>
          </div>
          <div class="playlist-inner">
            <div class="queue" ng-if="main.toggleQueue">
              <div class="video table" ng-repeat="video in main.playlist">
                <div class="table-cell">
                  {{ video.snippet.title }}
                </div>
                <div class="table-cell text-right">
                  <a ng-click="main.delete($index)">delete</a>
                </div>
              </div>
            </div>
            <div class="history" ng-if="!main.toggleQueue">
              <div class="video table" ng-repeat="video in main.playedVideos">
                <div class="table-cell">
                  {{ video.snippet.title }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="footer">
        <small>made with &hearts; (and angular + node + socket.io) by <a href="https://github.com/caressingbeast/ecreaylist">caressingbeast</a></small>
      </div>
    </div>
  </body>
</html>
